<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data noupdate="1">

    <!-- L1: sees only requests they initiated -->
    <record id="rule_purchase_request_creator_own" model="ir.rule">
      <field name="name">PO Requests - Own (L1)</field>
      <field name="model_id" ref="purchase.model_purchase_order"/>
      <field name="domain_force">[('initiated_by','=',user.id)]</field>
      <field name="groups" eval="[(4, ref('purchase_extension.group_purchase_request_creator'))]"/>
    </record>

    <!-- L2: sees waiting_l2 -->
    <record id="rule_purchase_request_l2" model="ir.rule">
      <field name="name">PO Requests - L2</field>
      <field name="model_id" ref="purchase.model_purchase_order"/>
      <field name="domain_force">[('approval_state','=','waiting_l2')]</field>
      <field name="groups" eval="[(4, ref('purchase_extension.group_purchase_manager'))]"/>
    </record>

    <!-- L3: sees waiting_l3 -->
    <record id="rule_purchase_request_l3" model="ir.rule">
      <field name="name">PO Requests - L3</field>
      <field name="model_id" ref="purchase.model_purchase_order"/>
      <field name="domain_force">[('approval_state','=','waiting_l3')]</field>
      <field name="groups" eval="[(4, ref('purchase_extension.group_purchase_approver'))]"/>
    </record>

    <!-- L4: sees waiting_l4 -->
    <record id="rule_purchase_request_l4" model="ir.rule">
      <field name="name">PO Requests - L4</field>
      <field name="model_id" ref="purchase.model_purchase_order"/>
      <field name="domain_force">[('approval_state','=','waiting_l4')]</field>
      <field name="groups" eval="[(4, ref('purchase_extension.group_purchase_finalizer'))]"/>
    </record>

  </data>
</odoo>
